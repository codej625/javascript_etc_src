<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>variable</title>
</head>
<body>
    <script>
        let varTest;                             // 변수선언, 초기화x "undefined"가 저장됨
        let varTest2 = 0;                        // 선언과 초기화
        let varTest3, varTest4;                  // 한 번에 여러 개의 변수를 함께 선언
        let i = 0, sum = 10, message = 'Hello';  // 변수선언과 초기화를 동시에
        name = "javascript";                     // 선언되지 않은 변수는 전역 변수가 됨

        // 함수 유효범위
        // 함수 유효범위는 어떤 함수 안에서 선언된 모든 변수는 그 함수 전체에 걸쳐 유효하다는 의미다. 
        // 이는 변수가 미처 선언되기 전에도 유효하다는 뜻이기도 하다.

        // hoisting
        // 자바스크립트 코드는 함수 안에 있는 모든 변수를 함수 맨 꼭대기로 끌어올린 것처럼 동작한다.
        var scope = 'global';
        function f() {
        console.log(scope);  // 'undefined'를 출력한다.(global이 아니다)
        var scope = 'local';  
        console.log(scope);  // 'local'을 출력한다.
        }

        // 실제로 실행되는 코드는 이렇다.
        function f() {
        var scope;           //끌어올림(hoisting)이라고 한다.(대신, 정의만 끌어올려진다)
        console.log(scope);  // 'undefined'가 저장되어 있다.
        scope = 'local';     // 초기화는 끌어올려지지 않는다.
        console.log(scope);
        }

        /*
            // 전역변수
            전역 변수는 사실 global 객체의 속성(property)입니다. 웹 페이지에서 global 객체는 window 이므로, windows.variable 구문을 통해 전역 변수를 설정하고 접근할 수 있습니다.
            전역 변수를 선언하는 것은 전역 객체의 프로퍼티를 정의하는 것이다.
            자바스크립트 전역 변수는 전역 객체의 프로퍼티이고,
            지역 변수는 규정된 것은 없지만, 변수를 각 함수 호출(또는 블록)과 연관된 객체의 프로퍼티로 생각해도 된다. (선언적 환경 기록)
            자바스크립트는 this 키워드로 전역 객체를 참조할 수 있다.
            전역변수는 프로그램 전체에 걸쳐 유효하다.
            지역변수는 변수가 선언된 함수 전체(또는 블록)에 걸쳐 유효하다. (그 안에 중첩된 함수 내에서도 유효하다.)
            
            // 유효범위 체인
            자바스크립트의 모든 코드 무더기는 그것과 연관된 유효범위 체인을 가지고 있다. 이 유효범위 체인은 해당 코드 무더기의 ‘범위 안’에 있는 변수를 정의하는 객체의 체인, 다시 말해 리스트다.
            함수(또는 블록)가 정의될 때, 함수는 유효범위 체인을 저장한다. 
            함수가 호출될 때, 해당 함수의 지역 변수를 저장하기 위해서 새로운 객체를 하나 생성하고, 해당 객체를 기존에 저장된 유효범위 체인에 추가한다.
            
            // 변수 해석
            변수 x의 값을 얻어야 할 때, 처음 유효범위 체인에 있는 객체에서 x를 찾기 시작한다. 만약 이 객체가 x 프로퍼티를 가지고 있다면, 그대로 사용하고, 
            없다면 유효범위 체인에 있는 다음 객체에서 x 프로퍼티를 찾는다.
            두 번째 객체가 x 프로퍼티를 가지고 있지 않다면, 또 다음 객체에서 찾는다. 
            찾을 때까지 이런 식으로 체인을 탐색한다. 
            만약 x가 유효범위 체인 안에 있는 객체의 프로퍼티가 아니라면, 
            x는 유효범위 안에 없기 때문에 ReferenceError가 발생한다.

            // 개발자 도구
            크롬 개발자 도구의 Sources탭에서 중단점을 설정하고, 로드하면, 오른쪽 하단 Scope 창에서 유효범위를 알아볼 수 있다.
        */
    </script>
</body>
</html>